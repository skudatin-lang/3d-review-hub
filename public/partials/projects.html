<!-- public/partials/projects.html -->
<div class="projects-header">
  <h2>Мои проекты</h2>
  <button id="newProjectBtn">+ Новый проект</button>
</div>
<div id="projectsList"></div>
<div id="emptyState" style="display:none;">Нет проектов</div>

<script>
  // Инициализация вкладки "projects"
  window.initProjects = async () => {
    const res = await fetch('/api/projects');
    const projects = await res.json();
    document.getElementById('projectsList').innerHTML = projects.map(p => `
      <div class="project-card">
        <h3>${p.name}</h3>
        <button onclick="openViewer('${p.id}')">Открыть</button>
      </div>
    `).join('');
    document.getElementById('emptyState').style.display = projects.length ? 'none' : 'block';

    // Обработчики
    window.openViewer = (id) => window.open(`/view/${id}`, '_blank');
    document.getElementById('newProjectBtn').onclick = () => alert('Форма создания проекта (реализуется отдельно)');
  };
</script>