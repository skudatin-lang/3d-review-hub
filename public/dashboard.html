<!-- public/dashboard.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç - 3D Review Hub</title>
  <link rel="stylesheet" href="styles/core.css">
  <link rel="stylesheet" href="styles/dashboard.css">
</head>
<body>
  <div class="dashboard-container">
    <header class="dashboard-header">
      <h1>3D Review Hub</h1>
      <button id="logoutBtn">–í—ã–π—Ç–∏</button>
    </header>
    <nav class="sidebar">
      <a href="#" data-tab="projects">üìÅ –ü—Ä–æ–µ–∫—Ç—ã</a>
      <a href="#" data-tab="portfolio">üé® –ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ</a> <!-- –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ–∑–∂–µ -->
      <a href="#" data-tab="settings">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
    </nav>
    <main class="content">
      <div id="tab-content"></div>
    </main>
  </div>

  <script>
    // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤–∫–ª–∞–¥–æ–∫
    async function loadTab(tabName) {
      try {
        const response = await fetch(`/partials/${tabName}.html`);
        const html = await response.text();
        document.getElementById('tab-content').innerHTML = html;
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è JS-–ª–æ–≥–∏–∫–∏ –≤–∫–ª–∞–¥–∫–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
        if (window[`init${tabName.charAt(0).toUpperCase() + tabName.slice(1)}`]) {
          window[`init${tabName.charAt(0).toUpperCase() + tabName.slice(1)}`]();
        }
      } catch (err) {
        document.getElementById('tab-content').innerHTML = `<p>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∫–ª–∞–¥–∫–∏.</p>`;
      }
    }

    // –ù–∞–≤–∏–≥–∞—Ü–∏—è
    document.querySelectorAll('[data-tab]').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        document.querySelectorAll('[data-tab]').forEach(l => l.classList.remove('active'));
        link.classList.add('active');
        loadTab(link.dataset.tab);
      });
    });

    // –í—ã—Ö–æ–¥
    document.getElementById('logoutBtn').addEventListener('click', async () => {
      await fetch('/logout', { method: 'POST' });
      window.location.href = '/';
    });

    // –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–≤–æ–π –≤–∫–ª–∞–¥–∫–∏
    loadTab('projects');
  </script>
</body>
</html>